---
title: Run L2
sidebar_position: 3
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Run L2

:::tip
This guide is fairly similar to the [Deploy L2](../running-surge/deploy-l2.mdx) guide. The main difference is that this guide is focused on running the components of the Surge rollup on the Hoodi testnet, while the other one is more general.
:::

A Layer 2 network builds on top of Layer 1 to increase scalability and reduce transaction costs, while still inheriting L1’s security. For Surge, the L2 network is where user transactions are executed and blocks are proposed and proven.

This guide provides clear instructions for running Surge’s L2 components using the [Simple Surge Node](https://github.com/NethermindEth/simple-surge-node), enabling you to run and test the core rollup logic.

To see how L2 fits into the overall system, refer to the [Surge Architecture documentation](/docs/about/architecture).

## Setup Process

Follow these steps to set up and run your L2 network:

### 1. Clone Repository

Clone the [Simple Surge Node](https://github.com/NethermindEth/simple-surge-node) repository and navigate into the directory:

```bash
git clone https://github.com/NethermindEth/simple-surge-node.git
cd simple-surge-node
```

### 2. Configure Environment

Create your environment configuration file (`.env`) by copying the provided sample:

```bash
cp .env.hoodi .env
```

:::tip Environment Configuration
The `.env.hoodi` file contains default configuration values for Hoodi. You can customize these settings — such as L1 and L2 parameters, genesis hashes, and contract addresses — as needed.

And make sure to update the L1 URLs to match the ones you're using.
:::

:::note
`host.docker.internal` values in the `.env` file might not work in all environments. If you encounter issues, replace `host.docker.internal` with your server's IP address or hostname.
:::


### 3. Start Script 

Start the script for deploying Surge stack components:
```bash 
./surge-stack-deployer.sh
```

You'll see the same prompts as in the [3. Start Protocol Deployment Script section](#3-start-protocol-deployment-script).
Set the same values as before to ensure the script uses the correct configuration. 

### 4. Stack Components

The script will ask you which components you want to deploy:

```bash
╔══════════════════════════════════════════════════════════════╗
║ Enter L2 stack option:                                       ║
║ 1 for driver only                                            ║
║ 2 for driver + proposer                                      ║
║ 3 for driver + proposer + spammer                            ║
║ 4 for driver + proposer + prover + spammer                   ║
║ 5 for all except spammer                                     ║
║ [default: all]                                               ║
╚══════════════════════════════════════════════════════════════╝
```

- `Driver` - Starts the Nethermind Execution Client for L2 network operation

- `Proposer` - Initiates the Proposer service for transaction bundling and block proposals

- `Prover` - Starts the Prover Relayer for proof relay, this component requests proofs from your provers and submits them on-chain.

- `Spammer` - Launches a transaction spammer to generate load on the L2 network for testing purposes

Choose the option that best fits your testing or deployment needs. For a full setup, select option `5` to deploy all components except the spammer.

### 5. Relayer and Bridge UI

The script will ask you:

```bash
╔══════════════════════════════════════════════════════════════╗
║ Start relayers? (true/false) [default: true]                 ║
╚══════════════════════════════════════════════════════════════╝
```

In this step the script starts the relayer for L1 and L2 communication, starts several other components like Bridge UI and BlockScout.

#### Bridge UI
The Bridge UI is the user-facing interface for transferring assets between Layer 1 and Layer 2, enabling seamless interaction with Surge’s cross-chain functionality. It relies on the underlying Relayer and smart contracts to facilitate these transfers securely.

#### Relayer 
The Relayer is a key component that facilitates cross-layer communication between Layer 1 and Layer 2, such as submitting proofs or syncing finalized state. It ensures that Surge’s L2 state transitions are correctly reflected and verified on L1.

#### BlockScout
Provides a web-based interface to:
- Explore blocks, transactions, and accounts
- Verify smart contracts
- Monitor network activity
- Track token transfers and balances

## Verification

After launching all components, ensure everything is running correctly by:

- Checking the status of Docker containers using `docker compose ps`.
- Monitoring logs for startup errors with `docker compose --profile <profile_name> logs -f --tail 100`.
- Verifying network connectivity between components.

## Troubleshooting

If issues arise during launch:

- Confirm environment variables in `.env` are correctly configured.
- Review Docker logs for detailed error information.
- Ensure required ports are open and accessible.
- Check network connectivity between the launched components.