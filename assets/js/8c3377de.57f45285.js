"use strict";(self.webpackChunksurge_docs=self.webpackChunksurge_docs||[]).push([[457],{6547:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>l,toc:()=>a});var i=s(4848),r=s(8453);const t={sidebar_position:1},o="Prepare L2 Genesis",l={id:"Guides/running-surge/prepare-l2-genesis",title:"Prepare L2 Genesis",description:"In this guide, we'll walk through the process of preparing the L2 genesis file, chainspec file and genesis hash later required by deploying L1 Network and L2.",source:"@site/docs/Guides/running-surge/prepare-l2-genesis.mdx",sourceDirName:"Guides/running-surge",slug:"/Guides/running-surge/prepare-l2-genesis",permalink:"/docs/Guides/running-surge/prepare-l2-genesis",draft:!1,unlisted:!1,editUrl:"https://github.com/NethermindEth/surge/tree/main/docs/docs/Guides/running-surge/prepare-l2-genesis.mdx",tags:[],version:"current",lastUpdatedAt:174222577e4,sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Getting Started",permalink:"/docs/Guides/running-surge/"},next:{title:"Deploy L1",permalink:"/docs/Guides/running-surge/deploy-l1"}},c={},a=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Deployment Steps",id:"deployment-steps",level:2},{value:"1. Clone Repository",id:"1-clone-repository",level:3},{value:"2. Switch to the Correct Branch",id:"2-switch-to-the-correct-branch",level:3},{value:"3. Install Dependencies",id:"3-install-dependencies",level:3},{value:"4. Set Environment Variables",id:"4-set-environment-variables",level:3},{value:"5. Generate L2 Genesis",id:"5-generate-l2-genesis",level:3},{value:"6. Download Genesis to Chainspec Converter",id:"6-download-genesis-to-chainspec-converter",level:3},{value:"7. Convert Genesis to Chainspec",id:"7-convert-genesis-to-chainspec",level:3}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"prepare-l2-genesis",children:"Prepare L2 Genesis"})}),"\n",(0,i.jsx)(n.p,{children:"In this guide, we'll walk through the process of preparing the L2 genesis file, chainspec file and genesis hash later required by deploying L1 Network and L2."}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Foundry, pnpm and jq installed on your system"}),"\n",(0,i.jsx)(n.li,{children:"Terminal access"}),"\n",(0,i.jsx)(n.li,{children:"Basic command line knowledge"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"deployment-steps",children:"Deployment Steps"}),"\n",(0,i.jsx)(n.h3,{id:"1-clone-repository",children:"1. Clone Repository"}),"\n",(0,i.jsx)(n.p,{children:"First, clone the Surge Taiko Mono repository and navigate to the directory:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/NethermindEth/surge-taiko-mono.git\n\ncd surge-taiko-mono\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-switch-to-the-correct-branch",children:"2. Switch to the Correct Branch"}),"\n",(0,i.jsxs)(n.p,{children:["Checkout the ",(0,i.jsx)(n.code,{children:"surge/devnet"})," branch:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git checkout surge/devnet\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-install-dependencies",children:"3. Install Dependencies"}),"\n",(0,i.jsx)(n.p,{children:"Navigate to the protocol package and install all required dependencies:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd packages/protocol\n\nfoundryup && pnpm install\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-set-environment-variables",children:"4. Set Environment Variables"}),"\n",(0,i.jsx)(n.p,{children:"Set the following environment variables as needed:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"export CONTRACT_OWNER=0x8943545177806ED17B9F23F0a21ee5948eCaa776\nexport L1_CHAINID=3151908\nexport L2_CHAINID=763374\n"})}),"\n",(0,i.jsx)(n.h3,{id:"5-generate-l2-genesis",children:"5. Generate L2 Genesis"}),"\n",(0,i.jsx)(n.p,{children:"Then compile the L2 contracts and generate the genesis block:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pnpm compile:l2\npnpm genesis:gen\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["You will find the genesis file in ",(0,i.jsx)(n.code,{children:"./test/genesis/data/"}),"."]})}),"\n",(0,i.jsx)(n.h3,{id:"6-download-genesis-to-chainspec-converter",children:"6. Download Genesis to Chainspec Converter"}),"\n",(0,i.jsx)(n.p,{children:"In order to convert the genesis file to chainspec file, you can download the following tool:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -O https://raw.githubusercontent.com/NethermindEth/core-scripts/refs/heads/main/gen2spec/gen2spec.jq\n"})}),"\n",(0,i.jsx)(n.h3,{id:"7-convert-genesis-to-chainspec",children:"7. Convert Genesis to Chainspec"}),"\n",(0,i.jsx)(n.p,{children:"Then run the following command to convert the genesis file to chainspec file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'cat ./test/genesis/data/genesis.json | jq ". * {\n  difficulty: 0,\n  config: {\n    taiko: true,\n    londonBlock: 0,\n    ontakeBlock: 1,\n    shanghaiTime: 0\n  }\n} | del(.config.clique)" | jq --from-file ./gen2spec.jq | jq \'.params.feeCollector = "0x0000000000000000000000000000000000000000"\' > ./test/genesis/data/chainspec.json\n'})}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["You will find the chainspec file in ",(0,i.jsx)(n.code,{children:"./test/genesis/data/"}),"."]})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var i=s(6540);const r={},t=i.createContext(r);function o(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);