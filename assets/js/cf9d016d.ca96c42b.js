"use strict";(self.webpackChunksurge_docs=self.webpackChunksurge_docs||[]).push([[116],{4174:(e,n,i)=>{i.d(n,{Ay:()=>c,RM:()=>o});var s=i(4848),r=i(8453);const o=[];function l(e){const n={a:"a",admonition:"admonition",code:"code",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Both ",(0,s.jsx)(n.code,{children:"chain_spec_list.json"})," and ",(0,s.jsx)(n.code,{children:"config.json"})," files are placed in ",(0,s.jsx)(n.code,{children:"raiko/host/config/devnet"})," for devnet and ",(0,s.jsx)(n.code,{children:"raiko/host/config/testnet"})," for testnet.\nYou can edit existing configs or create new ones based on your chain configuration."]}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsxs)(n.p,{children:["In ",(0,s.jsx)(n.a,{href:"https://github.com/NethermindEth/simple-surge-node",children:"Simple Surge Node"}),", the ",(0,s.jsx)(n.code,{children:"surge-protocol-deployer.sh"})," deployment script\nwill generate ",(0,s.jsx)(n.code,{children:"chain_spec_list.json"})," for you after the ",(0,s.jsx)(n.code,{children:"Running provers? (true/false) [default: false]"})," prompt."]}),(0,s.jsxs)(n.p,{children:["You just need to copy it from ",(0,s.jsx)(n.code,{children:"simple-surge-node/configs/chain_spec_list_default.json"})," into your prover config folder\n(e.g., ",(0,s.jsx)(n.code,{children:"raiko/host/config/devnet/chain_spec_list.json"}),")."]})]}),"\n",(0,s.jsxs)(n.p,{children:["Here are the most important parameters to check in ",(0,s.jsx)(n.code,{children:"config.json"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"address"}),": The address of the prover server"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"network"}),": The network name of the L2"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"concurrency_limit"}),": The number of concurrent proving tasks the prover can handle. Note that this\nvalue should be set to the number of GPUs available on the prover machine."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"l1_network"}),": The network name of the L1"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ballot_zk"}),": Configuration for ",(0,s.jsx)(n.code,{children:"zk_any"})," request"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ballot_sgx"}),": Configuration for ",(0,s.jsx)(n.code,{children:"sgx_any"})," request"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["This ",(0,s.jsx)(n.code,{children:"config.json"})," file is used as the default proof request config, but clients can override it with specific values."]}),"\n",(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsx)(n.mdxAdmonitionTitle,{}),(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"chain_spec_list.json"})," file is generated when deploying the protocol. You should copy it as-is. Don't change anything in this file unless you know what you're doing."]})]})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},6195:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>u,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"guides/running-surge/provers/sp1-and-risc0-provers","title":"SP1 & RISC Zero Provers","description":"This guide provides step-by-step instructions to set up SP1 and RISC Zero provers.","source":"@site/docs/guides/running-surge/provers/sp1-and-risc0-provers.mdx","sourceDirName":"guides/running-surge/provers","slug":"/guides/running-surge/provers/sp1-and-risc0-provers","permalink":"/docs/guides/running-surge/provers/sp1-and-risc0-provers","draft":false,"unlisted":false,"editUrl":"https://github.com/NethermindEth/surge-docs/tree/main/docs/guides/running-surge/provers/sp1-and-risc0-provers.mdx","tags":[],"version":"current","lastUpdatedAt":1761211347000,"sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"SGX Prover","permalink":"/docs/guides/running-surge/provers/sgx-prover"},"next":{"title":"Register Provers","permalink":"/docs/guides/running-surge/provers/register-provers"}}');var r=i(4848),o=i(8453),l=i(4174);const c={sidebar_position:2},d="SP1 & RISC Zero Provers",t={},a=[{value:"Prerequisites",id:"prerequisites",level:3},{value:"Overview",id:"overview",level:2},{value:"Uninstall Existing CUDA (optional)",id:"uninstall-existing-cuda-optional",level:2},{value:"Install CUDA",id:"install-cuda",level:2},{value:"Installing the NVIDIA Container Toolkit",id:"installing-the-nvidia-container-toolkit",level:2},{value:"Installing with Apt",id:"installing-with-apt",level:3},{value:"Configuring Docker",id:"configuring-docker",level:3},{value:"RISC Zero Specific Setup",id:"risc-zero-specific-setup",level:2},{value:"Running Raiko in Docker",id:"running-raiko-in-docker",level:2},{value:"1. Clone Raiko Repository",id:"1-clone-raiko-repository",level:3},{value:"2. Setup Chain Spec and Config",id:"2-setup-chain-spec-and-config",level:3},...l.RM,{value:"3. Configure Environment Variables",id:"3-configure-environment-variables",level:3},{value:"4. Build and Run the Prover",id:"4-build-and-run-the-prover",level:3},{value:"Using Pre-built Image from Docker Hub",id:"using-pre-built-image-from-docker-hub",level:4},{value:"Build the Image Yourself",id:"build-the-image-yourself",level:4},{value:"5. Verify the Prover is Running",id:"5-verify-the-prover-is-running",level:3},{value:"6. Next Steps",id:"6-next-steps",level:3},{value:"Non-Docker Setup Instructions",id:"non-docker-setup-instructions",level:2},{value:"1. Install Dependencies",id:"1-install-dependencies",level:3},{value:"2. Build SP1 and RISC Zero Provers",id:"2-build-sp1-and-risc-zero-provers",level:3},{value:"3. Run SP1 and RISC Zero Provers",id:"3-run-sp1-and-risc-zero-provers",level:3},{value:"4. Next Steps",id:"4-next-steps",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components},{Details:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"sp1--risc-zero-provers",children:"SP1 & RISC Zero Provers"})}),"\n",(0,r.jsx)(n.p,{children:"This guide provides step-by-step instructions to set up SP1 and RISC Zero provers.\nDue to the compatible nature of SP1 and RISC Zero, they can be run on the same machine, so the instructions for both provers are combined in this guide."}),"\n",(0,r.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Machine with CUDA support"}),"\n",(0,r.jsx)(n.li,{children:"Docker"}),"\n",(0,r.jsx)(n.li,{children:"L1 accounts with funds (one for the prover, one for prover registry)"}),"\n",(0,r.jsx)(n.li,{children:"L1 RPC URL"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"This guide covers setting up CUDA, CUDA Container Toolkit, and other dependencies required to run SP1 and RISC Zero provers on an x86 machine."}),"\n",(0,r.jsx)(n.p,{children:"For detailed information, refer to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.succinct.xyz/introduction.html",children:(0,r.jsx)(n.strong,{children:"Succinct Documentation"})})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://dev.risczero.com/api/",children:(0,r.jsx)(n.strong,{children:"RISC Zero Documentation"})})}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"uninstall-existing-cuda-optional",children:"Uninstall Existing CUDA (optional)"}),"\n",(0,r.jsxs)(n.p,{children:["Reference: ",(0,r.jsx)(n.a,{href:"https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#handle-conflicting-installation-methods",children:"NVIDIA CUDA Installation Guide - Handle Conflicting Installation Methods"})]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Use the following command to uninstall a Toolkit runfile installation:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo /usr/local/cuda-X.Y/bin/cuda-uninstaller\n"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Steps to Uninstall CUDA"})}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Stop NVIDIA Persistenced Service (if running):","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo service nvidia-persistenced stop\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Remove CUDA Toolkit:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'sudo apt-get --purge remove "*cublas*" "cuda*" "nsight*"\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Remove NVIDIA Drivers:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'sudo apt-get --purge remove "*nvidia*"\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Remove Source File Installations (if applicable):"})," Assuming the default installation location is ",(0,r.jsx)(n.code,{children:"/usr/local"}),", remove it using:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo rm -rf /usr/local/cuda*\n"})}),"\n"]}),"\n"]})]}),"\n",(0,r.jsx)(n.h2,{id:"install-cuda",children:"Install CUDA"}),"\n",(0,r.jsxs)(n.p,{children:["Refer to the ",(0,r.jsx)(n.a,{href:"https://docs.nvidia.com/cuda/cuda-quick-start-guide/index.html#runfile-installer",children:"CUDA Quick Start Guide"})," for more information."]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Download and run the CUDA installer:"})}),"\n",(0,r.jsxs)(n.p,{children:["Download the runfile CUDA installer from ",(0,r.jsx)(n.a,{href:"https://developer.nvidia.com/cuda-downloads",children:"here"})," for your OS.\nThe website will provide commands similar to:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"wget https://developer.download.nvidia.com/compute/cuda/13.0.1/local_installers/cuda_13.0.1_580.82.07_linux.run\nsudo sh cuda_13.0.1_580.82.07_linux.run\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"If you encounter an error,"})," the installer will create a file at:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"/etc/modprobe.d/nvidia-installer-disable-nouveau.conf\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Reboot the system:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo reboot\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"After rebooting, rerun the installer:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo sh cuda_13.0.1_580.82.07_linux.run\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Verify CUDA installation:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ls /usr/local/ | grep cuda\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Add environment variables:"})}),"\n",(0,r.jsxs)(n.p,{children:["Open the ",(0,r.jsx)(n.code,{children:".bashrc"})," file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"nano ~/.bashrc\n"})}),"\n",(0,r.jsx)(n.p,{children:"Append the following lines to the end of the file:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'export PATH="/usr/local/cuda/bin:$PATH"\nexport LD_LIBRARY_PATH="/usr/local/cuda/lib64:$LD_LIBRARY_PATH"\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Apply the changes:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"source ~/.bashrc\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"installing-the-nvidia-container-toolkit",children:"Installing the NVIDIA Container Toolkit"}),"\n",(0,r.jsxs)(n.p,{children:["Refer to the ",(0,r.jsx)(n.a,{href:"https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/install-guide.html",children:"NVIDIA Documentation"})]}),"\n",(0,r.jsx)(n.h3,{id:"installing-with-apt",children:"Installing with Apt"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Configure the production repository:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg    && curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list |      sed 's#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' |      sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Optionally, configure the repository to use experimental packages:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sed -i -e '/experimental/ s/^#//g' /etc/apt/sources.list.d/nvidia-container-toolkit.list\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Update the packages list from the repository:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt-get update\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Install the NVIDIA Container Toolkit packages:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt-get install -y nvidia-container-toolkit\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"configuring-docker",children:"Configuring Docker"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Configure the container runtime"})," by using the ",(0,r.jsx)(n.code,{children:"nvidia-ctk"})," command:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo nvidia-ctk runtime configure --runtime=docker\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"nvidia-ctk"})," command modifies the ",(0,r.jsx)(n.code,{children:"/etc/docker/daemon.json"})," file on the host. The file is updated so that Docker can use the NVIDIA Container Runtime."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Restart the Docker daemon:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo systemctl restart docker\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"risc-zero-specific-setup",children:"RISC Zero Specific Setup"}),"\n",(0,r.jsx)(n.p,{children:"If you intend to run the RISC Zero prover, you need to set up Bonsai (Bento):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/NethermindEth/risc0-bento.git\ncd risc0-bento\ncp bento/dockerfiles/sample.env ./sample.env\ndocker compose --file compose.yml --env-file sample.env up -d --build \n"})}),"\n",(0,r.jsx)(n.h2,{id:"running-raiko-in-docker",children:"Running Raiko in Docker"}),"\n",(0,r.jsx)(n.h3,{id:"1-clone-raiko-repository",children:"1. Clone Raiko Repository"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/NethermindEth/raiko.git\ncd raiko\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-setup-chain-spec-and-config",children:"2. Setup Chain Spec and Config"}),"\n",(0,r.jsx)(l.Ay,{}),"\n",(0,r.jsx)(n.h3,{id:"3-configure-environment-variables",children:"3. Configure Environment Variables"}),"\n",(0,r.jsxs)(n.p,{children:["Copy the sample ",(0,r.jsx)(n.code,{children:".env"})," file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd raiko/docker\ncp .env.sample.zk .env\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Edit the ",(0,r.jsx)(n.code,{children:".env"})," file and configure the following important variables:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"RAIKO_CONF_DIR"})," - Directory where your Raiko configuration files are stored"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BASE_CONFIG_FILE"})," - Base configuration file for Raiko inside ",(0,r.jsx)(n.code,{children:"$RAIKO_CONF_DIR"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BASE_CHAINSPEC_FILE"})," - Base chainspec file for Raiko inside ",(0,r.jsx)(n.code,{children:"$RAIKO_CONF_DIR"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"SP1_PROVER"})," - Set to ",(0,r.jsx)(n.code,{children:"local"})," to use local SP1 prover"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"SP1_VERIFIER_RPC_URL"})," - RPC URL of the L1 network where the SP1 verifier contract is deployed"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"SP1_VERIFIER_ADDRESS"})," - Address of the deployed SP1 verifier contract"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GROTH16_VERIFIER_RPC_URL"})," - RPC URL of the L1 network"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"GROTH16_VERIFIER_ADDRESS"})," - Address of the deployed Groth16 verifier contract"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"BONSAI_API_URL"})," - URL of the Bonsai API server"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"RUST_LOG"})," - Log level for Rust (",(0,r.jsx)(n.code,{children:"info"}),", ",(0,r.jsx)(n.code,{children:"debug"}),", ",(0,r.jsx)(n.code,{children:"warn"}),", ",(0,r.jsx)(n.code,{children:"error"}),", or ",(0,r.jsx)(n.code,{children:"trace"}),")"]}),"\n"]}),"\n",(0,r.jsxs)(n.admonition,{type:"tip",children:[(0,r.jsxs)(n.p,{children:["You can leave ",(0,r.jsx)(n.code,{children:"RAIKO_CONF_DIR"}),", ",(0,r.jsx)(n.code,{children:"BASE_CONFIG_FILE"}),", and ",(0,r.jsx)(n.code,{children:"BASE_CHAINSPEC_FILE"})," as default if you have placed your config files in ",(0,r.jsx)(n.code,{children:"raiko/host/config/devnet"}),"."]}),(0,r.jsxs)(n.p,{children:["Some SP1 and GROTH16 environment variables will be generated for you in ",(0,r.jsx)(n.a,{href:"https://github.com/NethermindEth/simple-surge-node",children:"Simple Surge Node"}),"\n",(0,r.jsx)(n.code,{children:"surge-protocol-deployer.sh"})," deployment script after the ",(0,r.jsx)(n.code,{children:"Running provers? (true/false) [default: false]"})," prompt. Just use them."]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"BONSAI_API_URL"})," should be set to ",(0,r.jsx)(n.code,{children:"http://0.0.0.0:8081"})," by default if you didn't change the Bonsai configuration."]})]}),"\n",(0,r.jsx)(n.h3,{id:"4-build-and-run-the-prover",children:"4. Build and Run the Prover"}),"\n",(0,r.jsx)(n.p,{children:"You have two options to run the prover:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use a pre-built image from Docker Hub"}),"\n",(0,r.jsx)(n.li,{children:"Build the image yourself"}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"using-pre-built-image-from-docker-hub",children:"Using Pre-built Image from Docker Hub"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"docker-compose-zk.yml"})," file uses the latest Raiko ZK image from Docker Hub by default.\nRun the following commands:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd docker \ndocker compose -f docker-compose-zk.yml up -d --force-recreate  # Run the prover in detached mode\n"})}),"\n",(0,r.jsxs)(n.p,{children:["To use a specific version, update the image tag in the ",(0,r.jsx)(n.code,{children:"docker-compose-zk.yml"})," file.\nCheck the ",(0,r.jsx)(n.a,{href:"https://github.com/NethermindEth/raiko",children:"Raiko repository"})," for available releases.\nUpdate the ",(0,r.jsx)(n.code,{children:"image"})," field in ",(0,r.jsx)(n.code,{children:"docker/docker-compose-zk.yml"})," for the ",(0,r.jsx)(n.code,{children:"raiko"})," service."]}),"\n",(0,r.jsxs)(n.p,{children:["For example, if the latest release is ",(0,r.jsx)(n.code,{children:"v1.8.5-surge"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"services:\n  raiko:\n    image: nethermind.jfrog.io/core-oci-local-prod/raiko-zk:v1.8.5-surge\n    ...\n"})}),"\n",(0,r.jsx)(n.h4,{id:"build-the-image-yourself",children:"Build the Image Yourself"}),"\n",(0,r.jsx)(n.p,{children:"You may want to build the image yourself if you have made local changes to the Raiko codebase or want to use a specific commit."}),"\n",(0,r.jsxs)(n.p,{children:["To build the image from the ",(0,r.jsx)(n.code,{children:"raiko"})," directory:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd docker # Navigate to the docker directory inside raiko\ndocker compose -f docker-compose-zk.yml up -d --force-recreate --build # Build and Run the prover\n"})}),"\n",(0,r.jsx)(n.h3,{id:"5-verify-the-prover-is-running",children:"5. Verify the Prover is Running"}),"\n",(0,r.jsx)(n.p,{children:"Your SP1/RISC Zero prover should now be operational. To verify it's running correctly, check the container logs:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker logs -f raiko\n"})}),"\n",(0,r.jsx)(n.h3,{id:"6-next-steps",children:"6. Next Steps"}),"\n",(0,r.jsxs)(n.p,{children:["Next you can set up an SGX prover by following the instructions in the ",(0,r.jsx)(n.a,{href:"/docs/guides/running-surge/provers/sgx-prover",children:"SGX Prover"})," guide."]}),"\n",(0,r.jsxs)(n.p,{children:["If you have already done it, the next step is to register your provers in the protocol. Follow the instructions in the ",(0,r.jsx)(n.a,{href:"/docs/guides/running-surge/provers/register-provers",children:"Register Provers"})," guide."]}),"\n",(0,r.jsx)(n.h2,{id:"non-docker-setup-instructions",children:"Non-Docker Setup Instructions"}),"\n",(0,r.jsx)(n.p,{children:"If you need to run the prover without Docker, follow these instructions.\nNote that this is not the preferred method for running the prover."}),"\n",(0,r.jsx)(n.h3,{id:"1-install-dependencies",children:"1. Install Dependencies"}),"\n",(0,r.jsx)(n.p,{children:"For running without Docker (not preferred), you first need to install dependencies. See the details below:"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Install Dependencies"}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Install Rust"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Install openssl"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt-get install libssl-dev\n"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Install package-config"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt-get update\nsudo apt-get install pkg-config\n"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Install sccache"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cargo install sccache\n"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Install gcc-12"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt install gcc-12\ncd /usr/bin\nsudo rm gcc\nsudo ln -s gcc-12 gcc\ngcc --version\n"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Install g++-12"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt install g++-12\nsudo rm g++\nsudo ln -s g++-12 g++\ng++ --version\n"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Install clang"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt install clang\n"})})]}),"\n",(0,r.jsx)(n.h3,{id:"2-build-sp1-and-risc-zero-provers",children:"2. Build SP1 and RISC Zero Provers"}),"\n",(0,r.jsx)(n.p,{children:"Install SP1 and RISC Zero dependencies:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"TARGET=sp1 make install\nTARGET=risc0 make install\n"})}),"\n",(0,r.jsx)(n.p,{children:"Build guest files:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cargo run --release --bin sp1-builder\ncargo run --release --bin risc0-builder\n"})}),"\n",(0,r.jsx)(n.p,{children:"Build the prover with both SP1 and RISC Zero features (you can also build them separately if needed):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cargo build --release --features sp1,risc0\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-run-sp1-and-risc-zero-provers",children:"3. Run SP1 and RISC Zero Provers"}),"\n",(0,r.jsx)(n.p,{children:"Set up environment variables:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"export SP1_PROVER=local\nexport SP1_VERIFIER_ADDRESS=<SP1_VERIFIER_ADDRESS>\nexport SP1_VERIFIER_RPC_URL=<SP1_VERIFIER_RPC_URL>\nexport GROTH16_VERIFIER_RPC_URL=<GROTH16_VERIFIER_RPC_URL>\nexport GROTH16_VERIFIER_ADDRESS=<GROTH16_VERIFIER_ADDRESS>\nexport BONSAI_API_URL=http://0.0.0.0:8081\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["Check the ",(0,r.jsx)(n.a,{href:"#3-configure-environment-variables",children:"3. Configure Environment Variables"}),"\nsection above for more details on how to get these values."]})}),"\n",(0,r.jsx)(n.p,{children:"Run the provers:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"./target/release/raiko-host --chain-spec-path=host/config/devnet/chain_spec_list.json --config-path=host/config/devnet/config.json\n"})}),"\n",(0,r.jsxs)(n.admonition,{type:"note",children:[(0,r.jsx)(n.mdxAdmonitionTitle,{}),(0,r.jsx)(n.p,{children:"If you compiled Raiko with both SP1 and RISC Zero features, both provers will be available in the same binary."})]}),"\n",(0,r.jsx)(n.h3,{id:"4-next-steps",children:"4. Next Steps"}),"\n",(0,r.jsxs)(n.p,{children:["Next you can set up an SGX prover by following the instructions in the ",(0,r.jsx)(n.a,{href:"/docs/guides/running-surge/provers/sgx-prover",children:"SGX Prover"})," guide."]}),"\n",(0,r.jsxs)(n.p,{children:["If you have already done it, the next step is to register your provers in the protocol. Follow the instructions in the ",(0,r.jsx)(n.a,{href:"/docs/guides/running-surge/provers/register-provers",children:"Register Provers"})," guide."]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>c});var s=i(6540);const r={},o=s.createContext(r);function l(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);