"use strict";(self.webpackChunksurge_docs=self.webpackChunksurge_docs||[]).push([[104],{3505:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>a,toc:()=>d});var r=t(4848),i=t(8453);const o={sidebar_position:2},s="Set up a Prover",a={id:"Guides/prover-setup",title:"Set up a Prover",description:"Complete guide for setting up a Surge prover.",source:"@site/docs/Guides/prover-setup.mdx",sourceDirName:"Guides",slug:"/Guides/prover-setup",permalink:"/docs/Guides/prover-setup",draft:!1,unlisted:!1,editUrl:"https://github.com/NethermindEth/surge/tree/main/docs/docs/Guides/prover-setup.mdx",tags:[],version:"current",lastUpdatedAt:1731580117e3,sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Deploy Protocols on L1",permalink:"/docs/Guides/deploy-l1-protocols"},next:{title:"Deploy L2",permalink:"/docs/Guides/deploy-l2"}},l={},d=[{value:"Deploy SGX Prover",id:"deploy-sgx-prover",level:2},{value:"1. Fetch Collateral Information",id:"1-fetch-collateral-information",level:3},{value:"2. Build and Initialize Image",id:"2-build-and-initialize-image",level:3},{value:"3. Get Quote and Measurement Values",id:"3-get-quote-and-measurement-values",level:3},{value:"4. Register Collaterals",id:"4-register-collaterals",level:3},{value:"5. Configure and Run Raiko",id:"5-configure-and-run-raiko",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"set-up-a-prover",children:"Set up a Prover"})}),"\n",(0,r.jsx)(n.p,{children:"Complete guide for setting up a Surge prover."}),"\n",(0,r.jsx)(n.h2,{id:"deploy-sgx-prover",children:"Deploy SGX Prover"}),"\n",(0,r.jsx)(n.h3,{id:"1-fetch-collateral-information",children:"1. Fetch Collateral Information"}),"\n",(0,r.jsx)(n.p,{children:"First, fetch the collateral information from Intel:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'FMSPC="00906ED50000"\n\nTCB_FILE="tcb.json"\nQE_IDENTITY_FILE="qe_identity.json"\n\ncurl -X GET "https://api.trustedservices.intel.com/sgx/certification/v3/tcb?fmspc=${FMSPC}" > ${TCB_FILE}\ncurl -X GET "https://api.trustedservices.intel.com/sgx/certification/v3/qe/identity" > ${QE_IDENTITY_FILE}\n\njq \'.tcbInfo.fmspc |= ascii_downcase\' ${TCB_FILE} > temp.json && mv temp.json ${TCB_FILE}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"2-build-and-initialize-image",children:"2. Build and Initialize Image"}),"\n",(0,r.jsxs)(n.p,{children:["Follow the instructions at ",(0,r.jsx)(n.a,{href:"https://github.com/NethermindEth/raiko/blob/main/docs/README_Docker_and_RA.md",children:"Raiko Docker and RA Documentation"})," to build and initialize the image."]}),"\n",(0,r.jsx)(n.h3,{id:"3-get-quote-and-measurement-values",children:"3. Get Quote and Measurement Values"}),"\n",(0,r.jsxs)(n.p,{children:["Retrieve the ",(0,r.jsx)(n.code,{children:"quote"}),", ",(0,r.jsx)(n.code,{children:"MRENCLAVE"}),", and ",(0,r.jsx)(n.code,{children:"MRSIGNER"})," values:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Get quote\ncat ~/.config/raiko/config/bootstrap.json | jq -r '.quote'\n\n# Get MRENCLAVE and MRSIGNER\ncat ~/.config/raiko/config/bootstrap.json | jq -r '.quote' | xxd -r -p > quote.bin\ngramine-sgx-quote-view quote.bin\n"})}),"\n",(0,r.jsx)(n.p,{children:"The output will contain important measurement values including:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["MRENCLAVE: ",(0,r.jsx)(n.code,{children:"14c4362d5dd0af9721ef9bdea2c92bf84b67fe34a102c892182ce2be7a81f2c5"})]}),"\n",(0,r.jsxs)(n.li,{children:["MRSIGNER: ",(0,r.jsx)(n.code,{children:"ca0583a715534a8c981b914589a7f0dc5d60959d9ae79fb5353299a4231673d5"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"4-register-collaterals",children:"4. Register Collaterals"}),"\n",(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"config_dcap_sgx_verifier.sh"})," to register the collaterals and the instance. For more information, see ",(0,r.jsx)(n.a,{href:"https://www.notion.so/SGX-TCB-on-L1-139360fc38d080d7a7bad6e0acca8efc?pvs=21",children:"SGX TCB on L1"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"5-configure-and-run-raiko",children:"5. Configure and Run Raiko"}),"\n",(0,r.jsx)(n.p,{children:"Set up the following environment variables:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"export SGX_INSTANCE_ID=0\nexport L1_NETWORK=surge_dev_l1\nexport NETWORK=surge_dev\nexport SGX_VERIFIER_ADDRESS=0x86A0679C7987B5BA9600affA994B78D0660088ff\nexport ATTESTATION_ADDRESS=0xdFb2fAc1519eDA2b3ee1Edf578ee0509DC8633f7\nexport PEM_CERTCHAIN_ADDRESS=0x86B28E406738f2928bE33D111A0B821BBC5610A2\nexport PROVER_PRIVATE_KEY=<your-private-key>\nexport PRIVATE_KEY=0x${PROVER_PRIVATE_KEY}\nexport FORK_URL='http://185.3.95.99:32002'\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Then run Raiko following the configuration instructions in the ",(0,r.jsx)(n.a,{href:"https://github.com/NethermindEth/raiko/blob/main/docs/README_Docker_and_RA.md#running-raiko",children:"Raiko Docker and RA Documentation"}),"."]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var r=t(6540);const i={},o=r.createContext(i);function s(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);