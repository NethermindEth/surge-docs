"use strict";(self.webpackChunksurge_docs=self.webpackChunksurge_docs||[]).push([[9971],{4305:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>d,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"guides/surge-on-hoodi/run-l2","title":"Run L2","description":"This guide is fairly similar to the Deploy L2 guide. The main difference is that this guide is focused on running the components of the Surge rollup on the Hoodi testnet, while the other one is more general.","source":"@site/docs/guides/surge-on-hoodi/run-l2.mdx","sourceDirName":"guides/surge-on-hoodi","slug":"/guides/surge-on-hoodi/run-l2","permalink":"/docs/guides/surge-on-hoodi/run-l2","draft":false,"unlisted":false,"editUrl":"https://github.com/NethermindEth/surge-docs/tree/main/docs/guides/surge-on-hoodi/run-l2.mdx","tags":[],"version":"current","lastUpdatedAt":1754924688000,"sidebarPosition":3,"frontMatter":{"title":"Run L2","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Set Up a Prover","permalink":"/docs/guides/surge-on-hoodi/provers"},"next":{"title":"Run Relayer","permalink":"/docs/guides/surge-on-hoodi/run-relayer"}}');var o=r(4848),i=r(8453);r(5537),r(9329);const s={title:"Run L2",sidebar_position:3},l="Run L2",a={},c=[{value:"Setup Process",id:"setup-process",level:2},{value:"1. Clone Repository",id:"1-clone-repository",level:3},{value:"2. Configure Environment",id:"2-configure-environment",level:3},{value:"4. Start Components",id:"4-start-components",level:3},{value:"Driver",id:"driver",level:4},{value:"Proposer",id:"proposer",level:4},{value:"Prover Relayer",id:"prover-relayer",level:4},{value:"Metrics",id:"metrics",level:4},{value:"Verification",id:"verification",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"run-l2",children:"Run L2"})}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["This guide is fairly similar to the ",(0,o.jsx)(n.a,{href:"/docs/guides/running-surge/deploy-l2",children:"Deploy L2"})," guide. The main difference is that this guide is focused on running the components of the Surge rollup on the Hoodi testnet, while the other one is more general."]})}),"\n",(0,o.jsx)(n.p,{children:"A Layer 2 network builds on top of Layer 1 to increase scalability and reduce transaction costs, while still inheriting L1\u2019s security. For Surge, the L2 network is where user transactions are executed and blocks are proposed and proven."}),"\n",(0,o.jsxs)(n.p,{children:["This guide provides clear instructions for running Surge\u2019s L2 components using the ",(0,o.jsx)(n.a,{href:"https://github.com/NethermindEth/simple-surge-node",children:"Simple Surge Node"}),", enabling you to run and test the core rollup logic."]}),"\n",(0,o.jsxs)(n.p,{children:["To see how L2 fits into the overall system, refer to the ",(0,o.jsx)(n.a,{href:"/docs/about/architecture",children:"Surge Architecture documentation"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"setup-process",children:"Setup Process"}),"\n",(0,o.jsx)(n.p,{children:"Follow these steps to set up and run your L2 network:"}),"\n",(0,o.jsx)(n.h3,{id:"1-clone-repository",children:"1. Clone Repository"}),"\n",(0,o.jsxs)(n.p,{children:["Clone the ",(0,o.jsx)(n.a,{href:"https://github.com/NethermindEth/simple-surge-node",children:"Simple Surge Node"})," repository and navigate into the directory:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/NethermindEth/simple-surge-node.git\ncd simple-surge-node\n"})}),"\n",(0,o.jsx)(n.h3,{id:"2-configure-environment",children:"2. Configure Environment"}),"\n",(0,o.jsxs)(n.p,{children:["Create your environment configuration file (",(0,o.jsx)(n.code,{children:".env"}),") by copying the provided sample:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"cp .env.hoodi .env\n"})}),"\n",(0,o.jsxs)(n.admonition,{title:"Environment Configuration",type:"tip",children:[(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:".env.hoodi"})," file contains default configuration values for Hoodi. You can customize these settings \u2014 such as L1 and L2 parameters, genesis hashes, and contract addresses \u2014 as needed."]}),(0,o.jsx)(n.p,{children:"And make sure to update the L1 URLs to match the ones you're using."})]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"host.docker.internal"})," values in the ",(0,o.jsx)(n.code,{children:".env"})," file might not work in all environments. If you encounter issues, replace ",(0,o.jsx)(n.code,{children:"host.docker.internal"})," with your server's IP address or hostname."]})}),"\n",(0,o.jsx)(n.h3,{id:"4-start-components",children:"4. Start Components"}),"\n",(0,o.jsx)(n.p,{children:"L2 consists of the following components, feel free to launch the ones specific to your needs."}),"\n",(0,o.jsxs)(n.admonition,{type:"tip",children:[(0,o.jsx)(n.p,{children:"You can run multiple profiles at once:"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker compose --profile <profile1> --profile <profile2> up -d\n"})})]}),"\n",(0,o.jsx)(n.h4,{id:"driver",children:"Driver"}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsx)(n.p,{children:"If you just want to follow the L2 chain, launching just the driver is sufficient."})}),"\n",(0,o.jsx)(n.p,{children:"Starts the Nethermind Execution Client for L2 network operation:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker compose --profile nethermind_execution_l2 up -d\n"})}),"\n",(0,o.jsx)(n.h4,{id:"proposer",children:"Proposer"}),"\n",(0,o.jsx)(n.p,{children:"Initiates the Proposer service for transaction bundling and block proposals:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker compose --profile proposer up -d\n"})}),"\n",(0,o.jsx)(n.h4,{id:"prover-relayer",children:"Prover Relayer"}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"If you did not deploy a prover in the previous setup steps, you can safely skip launching the prover relayer."})}),"\n",(0,o.jsx)(n.p,{children:"Launches the Prover Relayer for proof relay:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker compose --profile prover up -d\n"})}),"\n",(0,o.jsx)(n.h4,{id:"metrics",children:"Metrics"}),"\n",(0,o.jsx)(n.p,{children:"Sets up Prometheus and Grafana for real-time monitoring:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker compose --profile metrics up -d\n"})}),"\n",(0,o.jsx)(n.h2,{id:"verification",children:"Verification"}),"\n",(0,o.jsx)(n.p,{children:"After launching all components, ensure everything is running correctly by:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Checking the status of Docker containers using ",(0,o.jsx)(n.code,{children:"docker compose ps"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Monitoring logs for startup errors with ",(0,o.jsx)(n.code,{children:"docker compose --profile <profile_name> logs -f --tail 100"}),"."]}),"\n",(0,o.jsx)(n.li,{children:"Verifying network connectivity between components."}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,o.jsx)(n.p,{children:"If issues arise during launch:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Confirm environment variables in ",(0,o.jsx)(n.code,{children:".env"})," are correctly configured."]}),"\n",(0,o.jsx)(n.li,{children:"Review Docker logs for detailed error information."}),"\n",(0,o.jsx)(n.li,{children:"Ensure required ports are open and accessible."}),"\n",(0,o.jsx)(n.li,{children:"Check network connectivity between the launched components."}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},9329:(e,n,r)=>{r.d(n,{A:()=>s});r(6540);var t=r(4164);const o={tabItem:"tabItem_Ymn6"};var i=r(4848);function s(e){let{children:n,hidden:r,className:s}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,t.A)(o.tabItem,s),hidden:r,children:n})}},5537:(e,n,r)=>{r.d(n,{A:()=>w});var t=r(6540),o=r(4164),i=r(5627),s=r(6347),l=r(372),a=r(604),c=r(1861),u=r(8749);function d(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:r}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:r,attributes:t,default:o}}=e;return{value:n,label:r,attributes:t,default:o}}))}(r);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,r])}function p(e){let{value:n,tabValues:r}=e;return r.some((e=>e.value===n))}function f(e){let{queryString:n=!1,groupId:r}=e;const o=(0,s.W6)(),i=function(e){let{queryString:n=!1,groupId:r}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:n,groupId:r});return[(0,a.aZ)(i),(0,t.useCallback)((e=>{if(!i)return;const n=new URLSearchParams(o.location.search);n.set(i,e),o.replace({...o.location,search:n.toString()})}),[i,o])]}function m(e){const{defaultValue:n,queryString:r=!1,groupId:o}=e,i=h(e),[s,a]=(0,t.useState)((()=>function(e){let{defaultValue:n,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const t=r.find((e=>e.default))??r[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:i}))),[c,d]=f({queryString:r,groupId:o}),[m,g]=function(e){let{groupId:n}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(n),[o,i]=(0,u.Dv)(r);return[o,(0,t.useCallback)((e=>{r&&i.set(e)}),[r,i])]}({groupId:o}),v=(()=>{const e=c??m;return p({value:e,tabValues:i})?e:null})();(0,l.A)((()=>{v&&a(v)}),[v]);return{selectedValue:s,selectValue:(0,t.useCallback)((e=>{if(!p({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);a(e),d(e),g(e)}),[d,g,i]),tabValues:i}}var g=r(9136);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=r(4848);function b(e){let{className:n,block:r,selectedValue:t,selectValue:s,tabValues:l}=e;const a=[],{blockElementScrollPositionUntilNextRender:c}=(0,i.a_)(),u=e=>{const n=e.currentTarget,r=a.indexOf(n),o=l[r].value;o!==t&&(c(n),s(o))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const r=a.indexOf(e.currentTarget)+1;n=a[r]??a[0];break}case"ArrowLeft":{const r=a.indexOf(e.currentTarget)-1;n=a[r]??a[a.length-1];break}}n?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.A)("tabs",{"tabs--block":r},n),children:l.map((e=>{let{value:n,label:r,attributes:i}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:e=>{a.push(e)},onKeyDown:d,onClick:u,...i,className:(0,o.A)("tabs__item",v.tabItem,i?.className,{"tabs__item--active":t===n}),children:r??n},n)}))})}function j(e){let{lazy:n,children:r,selectedValue:i}=e;const s=(Array.isArray(r)?r:[r]).filter(Boolean);if(n){const e=s.find((e=>e.props.value===i));return e?(0,t.cloneElement)(e,{className:(0,o.A)("margin-top--md",e.props.className)}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==i})))})}function y(e){const n=m(e);return(0,x.jsxs)("div",{className:(0,o.A)("tabs-container",v.tabList),children:[(0,x.jsx)(b,{...n,...e}),(0,x.jsx)(j,{...n,...e})]})}function w(e){const n=(0,g.A)();return(0,x.jsx)(y,{...e,children:d(e.children)},String(n))}},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>l});var t=r(6540);const o={},i=t.createContext(o);function s(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);